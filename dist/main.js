chrome.tabs.onUpdated.addListener(((e,t,c)=>{t.url&&chrome.storage.local.get("flagAct",(function(t){let c=t.flagAct;void 0!==c&&1==c&&function(e){chrome.tabs.query({lastFocusedWindow:!0,active:!0},(function(t){let c,r=function(e){e=encodeURI(e),/^[\x00-\xFF]*$/.test(e);let t=e.hostname;new RegExp(String.raw(`s${t}$s$`),"g").test(e)&&(e+="/"),e=(e=(e=(e=e.replace("0x09","")).replace("0x0d","")).replace("0x0a","")).replace(/#frag$/,""),t=(e=decodeURIComponent(e)).hostname;let[c,r]=e.split(t);t=t.replace(/^\.*/,""),t=t.replace(/\.*$/,""),t=t.toLowerCase();let a=(e=c+t+r).search,o=e.split(a);return o=o.replace("/./","/"),o=o.replace(/\/*/,"/"),o=encodeURIComponent(o),o+a}(t[0].url);c=0!=Math.trunc(2*Math.random()+0)?"good site":"bad site",chrome.scripting.executeScript({target:{tabId:e},files:["inject.js"]},(()=>{chrome.scripting.executeScript({target:{tabId:e},args:[r],func:(...e)=>doAlert(...e)})}))}))}(e)}))}));